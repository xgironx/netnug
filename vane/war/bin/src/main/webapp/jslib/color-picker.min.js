!function(o,e){"undefined"!=typeof module&&module.exports?(e("undefined"==typeof angular?require("angular"):angular),module.exports="color.picker.core"):"function"==typeof define&&define.amd?define(["angular"],e):e(o.angular)}(this,function(o){"use strict";function e(o,e){function n(){p.classList.add("click-color"),d()?(b.onSelect({color:b.selectedColor}),e.publish("selected",b.selectedColor),e.publish("hide",b.selectedColor),m.classList.add("color-shadow-animate")):(e.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}function t(o){var n=100,t=50,r=1,l="hsla("+o+", "+n+"%, "+t+"%, "+r+")",i=e.hslToRgb(o,n,t),s=e.hslToHex(o,n,t);p.style.backgroundColor=l,m.style.borderColor=l,b.angle=o,b.selectedColor={hex:s,hsla:{hue:o,saturation:n,luminosity:t,alpha:r},rgba:{red:i.red,green:i.green,blue:i.blue,alpha:r}}}function r(){g=o[0].querySelector(".rotator"),f=o[0].querySelector(".knob"),p=o[0].querySelector(".color"),m=o[0].querySelector(".color-shadow"),v=o[0].querySelector(".color-palette"),p.addEventListener("animationend",s),f.addEventListener("transitionend",a),m.addEventListener("animationend",c),v.addEventListener("transitionend",u)}function l(){this.color&&"red"in this.color&&"green"in this.color&&"blue"in this.color&&(this.angle=e.rgbToHsl(this.color.red,this.color.green,this.color.blue).hue)}function i(){p.removeEventListener("animationend",s),f.removeEventListener("transitionend",a),m.removeEventListener("animationend",c),v.removeEventListener("transitionend",u),f=null,g=null,p=null,m=null,v=null,e.unsubscribe()}function s(){h()?(f.classList.add("zoom-knob-out"),f.classList.remove("zoom-knob-in")):(f.classList.add("zoom-knob-in"),f.classList.remove("zoom-knob-out")),p.classList.remove("click-color")}function a(o){"transform"===o.propertyName&&(h()?e.publish("shown",b.selectedColor):(v.classList.add("blur-palette-out"),v.classList.remove("blur-palette-in")))}function c(){m.classList.remove("color-shadow-animate")}function u(o){"transform"===o.propertyName&&(d()?(f.classList.add("zoom-knob-in"),f.classList.remove("zoom-knob-out")):e.publish("hidden",b.selectedColor))}function d(){var o=v.classList.contains("blur-palette-in"),e=v.classList.contains("blur-palette-out");return o||!o&&!e}function h(){return!f.classList.contains("zoom-knob-out")}var b=this;this.$onInit=r,this.$onDestroy=i,this.$onChanges=l,this.onColorSelClick=n,this.onRotatorDrag=t;var f,g,p,m,v;e.subscribe("open",function(){d()||(e.publish("show",b.selectedColor),v.classList.add("blur-palette-in"),v.classList.remove("blur-palette-out"))}),e.subscribe("close",function(){d()&&(e.publish("hide",b.selectedColor),f.classList.add("zoom-knob-out"),f.classList.remove("zoom-knob-in"))})}function n(){function o(o,e){o.angle=o.angle||0;var n=new Propeller(e[0],{angle:o.angle,inertia:.7,speed:0,onRotate:function(e){o.onRotate({angle:this.angle})},onDragStart:function(){e.addClass("dragging")},onDragStop:function(){e.removeClass("dragging")}});o.$watch("angle",function(e){n.angle=e,o.onRotate({angle:e})}),o.$on("$destroy",function(){n.stop(),n.unbind(),n=null})}var e={link:o,restrict:"A",scope:{onRotate:"&",angle:"<"}};return e}function t(o){function e(e,n){o.$applyAsync(function(){o.$broadcast(u+e,n)})}function n(e,n){var t=o.$on(u+e,n);return c.push(t),t}function t(){c.forEach(function(o){o()})}function r(o,e,n){return((1<<24)+(o<<16)+(e<<8)+n).toString(16).slice(1)}function l(o,e,n){o/=255,e/=255,n/=255;var t,r,l=Math.max(o,e,n),i=Math.min(o,e,n),s=(l+i)/2;if(l===i)t=r=0;else{var a=l-i;r=s>.5?a/(2-l-i):a/(l+i),l===o&&(t=(e-n)/a+(e<n?6:0)),l===e&&(t=(n-o)/a+2),l===n&&(t=(o-e)/a+4)}return{hue:60*t,saturation:100*r,luminosity:100*s}}function i(o,e,n){var t=s(o,e,n);return r(t.red,t.green,t.blue)}function s(o,e,n){var t,r,l;if(o/=360,e/=100,n/=100,0===e)t=r=l=n;else{var i=n<.5?n*(1+e):n+e-n*e,s=2*n-i;t=a(s,i,o+1/3),r=a(s,i,o),l=a(s,i,o-1/3)}return{red:Math.round(255*t),green:Math.round(255*r),blue:Math.round(255*l)}}function a(o,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?o+6*(e-o)*n:n<.5?e:n<2/3?o+(e-o)*(2/3-n)*6:o}this.publish=e,this.subscribe=n,this.unsubscribe=t,this.rgbToHex=r,this.rgbToHsl=l,this.hslToRgb=s,this.hslToHex=i;var c=[],u="color-picker."}e.$inject=["$element","ColorPickerService"],t.$inject=["$rootScope"],o.module("color.picker.core",[]).component("colorPicker",{bindings:{onSelect:"&",color:"<?ngModel"},controller:e,template:'<div class="rotator" color-picker-rotator on-rotate="$ctrl.onRotatorDrag(angle)" angle="$ctrl.angle"><div class="knob"></div></div><button type="button" class="color" ng-click="$ctrl.onColorSelClick()"></button><div class="color-shadow"></div><div class="color-palette"></div>'}),o.module("color.picker.core").directive("colorPickerRotator",n),o.module("color.picker.core").service("ColorPickerService",t)});
//# sourceMappingURL=color-picker.min.js.map